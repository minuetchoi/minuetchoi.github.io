---
layout: post
title: "[Oracle] 05. SQL - row_number, rank, dense_rank"
date: 2022-02-15 10:40:00 +0900
category: oracle
---

# 1. row_number, rank, dense_rank


### 사용처
순위를 구하고 싶을 때, row_number함수와 rank함수, dense_rank함수를 사용한다.


```sql
create table sampleT05(id, score) as
select 1, 100 from dual
union all
select 1,  90 from dual
union all
select 1,  90 from dual
union all
select 1,  80 from dual
union all
select 1,  70 from dual
union all
select 2, 100 from dual
union all
select 2, 100 from dual
union all
select 2, 100 from dual
union all
select 2,  90 from dual
union all
select 2,  80 from dual;
```

```sql
select id, 
       score,
       row_number() over(partition by id order by score desc) as "row_number"
       rank() over(partition by id order by score desc) as "rank",
       dense_rank() over(partition by id order by score desc) as "dense_rank"
from   sampleT05
order  by id, score desc;
```

```sql
id score row_number rank dense_rank
-- ----- ---------- ---- ----------
 1   100          1    1          1
 1    90          2    2          2
 1    90          3    2          2
 1    80          4    4          3
 1    70          5    5          4
 2   100          1    1          1
 2   100          2    1          1
 2   100          3    1          1
 2    90          4    4          2
 2    80          5    5          3
```

<br>

<mark style="background-color: #ffdce0">row_number함수는</mark>, 1에서 시작되어, 반드시 +1 이 됩니다.

<br>

<mark style="background-color: #ffdce0">rank함수는</mark>, 동일번호가 있을시 순위를 동일번호 포함하여 다음번호가 채번됩니다.

<br>

<mark style="background-color: #ffdce0">dense_rank함수는</mark>, 동일번호가 있을시 순위를 동일번호에 포함시키지 않고 다음번호가 채번됩니다.